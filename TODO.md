# TODO - Coin Sensor Backend

## 📊 인사이트 기능 개발

### 차트 데이터 제공

- [ ] 김치프리미엄(김프) 차트 API 구현
- [ ] BTC.D (비트코인 도미넌스) 차트 API 구현
- [ ] USDT.D (USDT 도미넌스) 차트 API 구현
- [ ] TOTAL (전체 시가총액) 차트 API 구현
- [ ] Gold (금) 가격 차트 API 구현
- [ ] NASDAQ 지수 차트 API 구현

### 사용자 기반 인사이트

- [ ] 조회수 급등 코인 분석 및 API 구현
- [ ] 즐겨찾기 증가 코인 분석 및 API 구현
- [ ] 사용자 관심도 기반 코인 랭킹 시스템 구현

## 🤖 AI 분석 기능

### AI 분석 시스템 구축

- [ ] AI 분석 엔진 설계 및 구현
- [ ] 외부 AI API 연동 (OpenAI, Claude 등)
- [ ] 시장 데이터 기반 AI 분석 로직 개발
- [ ] AI 분석 결과 저장 및 관리 시스템
- [ ] AI 분석 리포트 생성 API 구현

## 💬 커뮤니티 기능 확장

### 실시간 인기 키워드 시스템

- [ ] Elasticsearch 설치 및 설정
- [ ] 채팅 메시지 실시간 인덱싱 구현
- [ ] 키워드 추출 및 빈도 분석 로직 개발
- [ ] 실시간 인기 키워드 API 구현
- [ ] 키워드 트렌드 분석 기능

### 투표 시스템

- [ ] 투표 주제 생성 API 구현
- [ ] 투표 옵션 관리 API 구현
- [ ] 사용자 투표 참여 API 구현
- [ ] 투표 결과 집계 및 조회 API 구현
- [ ] 투표 통계 및 분석 기능

## 📰 뉴스 서비스

### 뉴스 API 연동

- [ ] CryptoCompare 뉴스 API 연동
- [ ] CoinGecko 뉴스 API 연동 (제한적)
- [ ] 뉴스 데이터 수집 스케줄러 구현
- [ ] 뉴스 분류 및 필터링 로직 개발
- [ ] 뉴스 검색 및 조회 API 구현
- [ ] 뉴스 감정 분석 기능 (선택사항)

## 🔍 탐지 시스템 개선

### 탐지 데이터 구조 개선

- [ ] 탐지 유형별 다대다 테이블 설계
    - `detection_types` 테이블 생성
    - `detection_coin_mappings` 테이블 생성
- [ ] 탐지 유형 정의
    - 전체 코인 탐지
    - TOP20 코인 탐지
    - BOTTOM20 코인 탐지
    - 거래량 급증 탐지
    - 가격 급등/급락 탐지
- [ ] 탐지된 코인 재활용 시스템 구현
- [ ] 시간대별 탐지 데이터 조회 API 개선
- [ ] 탐지 유형별 필터링 기능 구현

### 탐지 성능 최적화

- [ ] 탐지 알고리즘 성능 개선
- [ ] 탐지 결과 캐싱 전략 수립
- [ ] 대용량 데이터 처리 최적화

## 🗄️ 데이터베이스 스키마 업데이트

### 새로운 테이블 추가

- [ ] `detection_types` 테이블 생성
- [ ] `detection_coin_mappings` 테이블 생성
- [ ] `market_indicators` 테이블 생성 (김프, BTC.D 등)
- [ ] `ai_analysis_results` 테이블 확장

### 기존 테이블 수정

- [ ] `detections` 테이블 구조 개선
- [ ] `news_articles` 테이블 인덱스 최적화
- [ ] `user_reactions` 테이블 성능 개선

## 🔧 기술적 개선사항

### 성능 최적화

- [ ] Elasticsearch 클러스터 구성
- [ ] Redis 캐싱 전략 개선
- [ ] 데이터베이스 쿼리 최적화
- [ ] API 응답 시간 개선

### 모니터링 및 로깅

- [ ] Elasticsearch 모니터링 설정
- [ ] AI API 호출 로깅 및 모니터링
- [ ] 뉴스 API 호출 제한 모니터링
- [ ] 시스템 성능 메트릭 수집

## 📅 우선순위

### Phase 1 (높은 우선순위)

1. 탐지 시스템 개선
2. 뉴스 API 연동
3. 인사이트 차트 데이터 제공

### Phase 2 (중간 우선순위)

1. AI 분석 기능 구현
2. 투표 시스템 구현
3. 조회수/즐겨찾기 기반 인사이트

### Phase 3 (낮은 우선순위)

1. Elasticsearch 키워드 시스템
2. 성능 최적화
3. 고급 AI 분석 기능

## 📝 참고사항

- CryptoCompare API 무료 플랜: 뉴스 일 2,000 요청 제한
- Elasticsearch 메모리 사용량 고려하여 서버 리소스 계획 필요
- AI API 비용 고려하여 호출 빈도 조절 필요
- 탐지 시스템 개선 시 기존 데이터 마이그레이션 계획 수립 필요

```json

K라인(캔들스틱) 데이터 응답
{
  "e": "kline",
  // 이벤트 타입
  "E": 123456789,
  // 이벤트 시간
  "s": "BTCUSDT",
  // 심볼
  "k": {
    "t": 123400000,
    // 캔들 시작 시간
    "T": 123460000,
    // 캔들 종료 시간
    "s": "BTCUSDT",
    // 심볼
    "i": "1m",
    // 간격
    "f": 100,
    // 첫 거래 ID
    "L": 200,
    // 마지막 거래 ID
    "o": "0.0010",
    // 시가
    "c": "0.0020",
    // 종가
    "h": "0.0025",
    // 고가
    "l": "0.0015",
    // 저가
    "v": "1000",
    // 거래량
    "n": 100,
    // 거래 횟수
    "x": false,
    // 캔들 완료 여부
    "q": "1.0000",
    // 거래금액
    "V": "500",
    // 매수 거래량
    "Q": "0.500",
    // 매수 거래금액
    "B": "123456"
    // 무시
  }
}

Copy
json
24시간 티커 데이터 응답
{
  "e": "24hrTicker",
  // 이벤트 타입
  "E": 123456789,
  // 이벤트 시간
  "s": "BTCUSDT",
  // 심볼
  "p": "0.0015",
  // 가격 변화량
  "P": "250.00",
  // 가격 변화율(%)
  "w": "0.0018",
  // 가중 평균 가격
  "x": "0.0009",
  // 24시간 전 가격
  "c": "0.0025",
  // 현재 가격
  "Q": "10",
  // 현재 수량
  "b": "0.0024",
  // 최고 매수 가격
  "B": "10",
  // 최고 매수 수량
  "a": "0.0026",
  // 최고 매도 가격
  "A": "100",
  // 최고 매도 수량
  "o": "0.0010",
  // 24시간 전 시가
  "h": "0.0025",
  // 24시간 고가
  "l": "0.0010",
  // 24시간 저가
  "v": "10000",
  // 24시간 거래량
  "q": "18",
  // 24시간 거래금액
  "O": 0,
  // 통계 시작 시간
  "C": 86400000,
  // 통계 종료 시간
  "F": 0,
  // 첫 거래 ID
  "L": 18150,
  // 마지막 거래 ID
  "n": 18151
  // 총 거래 횟수
}



```